  :root {
    --bg: #0a0c10;
    --surface: #111318;
    --surface2: #181c24;
    --border: #1e2430;
    --accent: #00e5a0;
    --text: #e8ecf0;
    --muted: #9aabc4;
    --aggressive: #ff4d6d;
    --moderate: #ffd166;
    --conservative: #06d6a0;
  }

  body.light {
    --bg: #f4f6f9;
    --surface: #ffffff;
    --surface2: #eef1f6;
    --border: #dde2ec;
    --text: #0f1623;
    --muted: #8a9ab8;
    --aggressive: #e02a4a;
    --moderate: #c49500;
    --conservative: #00a87a;
  }

  
  /* Theme toggle button */
  .theme-toggle {
    position: absolute;
    right: 5%;
    top: 12px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 5px 5px 5px 10px;
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    transition: background 0.2s, border-color 0.2s;
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    color: var(--muted);
    user-select: none;
  }
  .theme-toggle:hover { border-color: var(--accent); color: var(--text); }
  .theme-toggle-track {
    width: 28px;
    height: 16px;
    background: var(--border);
    border-radius: 8px;
    position: relative;
    transition: background 0.2s;
    flex-shrink: 0;
  }
  body.light .theme-toggle-track { background: var(--accent); }
  .theme-toggle-thumb {
    width: 12px;
    height: 12px;
    background: var(--muted);
    border-radius: 50%;
    position: absolute;
    top: 2px;
    left: 2px;
    transition: transform 0.2s, background 0.2s;
  }
  body.light .theme-toggle-thumb { transform: translateX(12px); background: #000; }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { background:var(--bg); color:var(--text); font-family:'Inter',sans-serif; min-height:100vh; overflow-x:hidden; padding-top:env(safe-area-inset-top); padding-bottom:env(safe-area-inset-bottom); touch-action:pan-x pan-y; }
  body::before {
    content:''; position:fixed; inset:0;
    background-image:linear-gradient(rgba(0,229,160,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,229,160,0.03) 1px,transparent 1px);
    background-size:40px 40px; pointer-events:none; z-index:0;
  }
  body.light::before { display:none; }
  .container { max-width:1400px; margin:0 auto; padding:0 24px; }
  header {
    padding:28px 5% 20px;
    display:flex; flex-direction:column; gap:6px;
    border-bottom:1px solid var(--border);
    position:sticky; top:0; z-index:10001;
    background:var(--bg);
    transition:padding 0.25s ease, gap 0.25s ease;
  }
  header.header-compact {
    padding:10px 5% 0;
    gap:0;
  }
  header.header-compact .tagline { font-size:10px; margin-left:0; opacity:0.5; }
  header.header-compact .logo-icon { width:28px; height:28px; }
  header.header-compact .logo-icon::before { border-bottom-width:9px; top:2px; border-left-width:3px; border-right-width:3px; }
  header.header-compact .logo-icon::after { border-top-width:9px; bottom:2px; border-left-width:3px; border-right-width:3px; }
  header.header-compact .logo-icon-center { width:3px; height:3px; }
  header.header-compact .logo h1 { font-size:22px; }
  header.header-compact .logo { gap:8px; }
  .header-actions {
    position:absolute; right:calc(5% + 80px); top:12px;
    display:flex; align-items:center; gap:8px;
  }
  .header-sub {
    display:flex; align-items:center; justify-content:space-between;
    padding:6px 0 8px; width:100%;
    border-top:1px solid var(--border); margin-top:8px;
    max-height:40px; overflow:hidden;
    transition: max-height 0.25s ease, padding 0.25s ease, margin 0.25s ease, opacity 0.25s ease, border-color 0.25s ease;
    opacity:1;
  }
  .header-sub.collapsed {
    max-height:0; padding:0; margin-top:0; opacity:0; border-color:transparent;
  }
  .header-sub-left { flex:1; }
  .logo { display:flex; align-items:center; gap:12px; }
  .logo-icon {
    width:42px; height:42px;
    border:1.5px solid #2a3140;
    border-radius:50%;
    position:relative;
    display:flex; align-items:center; justify-content:center;
    background:var(--bg);
    flex-shrink:0;
  }
  .logo-icon::before {
    content:'';
    position:absolute;
    width:0; height:0;
    border-left:4px solid transparent;
    border-right:4px solid transparent;
    border-bottom:13px solid var(--accent);
    top:4px;
    filter:drop-shadow(0 0 4px rgba(0,229,160,0.6));
  }
  .logo-icon::after {
    content:'';
    position:absolute;
    width:0; height:0;
    border-left:4px solid transparent;
    border-right:4px solid transparent;
    border-top:13px solid var(--aggressive);
    bottom:4px;
    opacity:0.55;
  }
  .logo-icon-center {
    width:4px; height:4px;
    background:var(--text);
    border-radius:50%;
    position:absolute;
    z-index:2;
  }

  .logo h1 { font-size:32px; font-weight:400; letter-spacing:2px; color:var(--text); font-family:'Bebas Neue',sans-serif; line-height:1; text-transform:uppercase; }
  .logo h1 span { color:var(--accent); font-family:'Bebas Neue',sans-serif; letter-spacing:2px; }
  .tagline { color:var(--muted); font-family:'Space Mono',monospace; font-size:11px; letter-spacing:0.3px; margin-left:0; white-space:nowrap; }
  .main-grid { display:grid; grid-template-columns:1fr 1.6fr; gap:24px; padding:28px 2%; position:relative; }
  .panel, .strategy-card, .health-panel, .rebalance-panel, .position-panel { background:var(--surface); border:1px solid var(--border); border-radius:16px; overflow:hidden; }
  .panel-header { padding:16px 20px 12px; border-bottom:1px solid var(--border); }
  .section-title { font-size:13px; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; color:var(--muted); font-family:'Space Mono',monospace; }
  
  /* Stock input */
  .stock-form { padding:20px 24px; }
  .input-row { display:grid; grid-template-columns:1fr 80px; gap:8px; margin-bottom:12px; }
  input[type="text"],input[type="number"] {
    background:var(--surface2); border:1px solid var(--border); border-radius:8px;
    padding:10px 14px; color:var(--text); font-family:'Space Mono',monospace; font-size:13px;
    outline:none; transition:border-color 0.2s; width:100%;
  }
  input[type="text"]:focus,input[type="number"]:focus { border-color:var(--accent); }
  input::placeholder { color:var(--muted); }
  .btn-add {
    background:var(--accent); color:#000; border:none; border-radius:8px;
    padding:10px 14px; font-family:'DM Sans',sans-serif; font-weight:600; font-size:18px;
    cursor:pointer; transition:opacity 0.2s,transform 0.1s; line-height:1;
  }
  .btn-add:hover { opacity:0.85; }
  .btn-add:active { transform:scale(0.96); }
  .error-msg { color:var(--aggressive); font-size:11px; font-family:'Space Mono',monospace; padding:4px 0 8px; }

  /* Stocks list */
  .stock-list { padding:0 24px 12px; display:flex; flex-direction:column; gap:4px; min-height:40px; }
  .stock-item {
    display:flex; align-items:center; justify-content:space-between;
    background:var(--surface2); border:1px solid var(--border); border-radius:8px;
    padding:7px 14px; animation:slideIn 0.2s ease;
  }
  @keyframes slideIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
  .stock-info { display:flex; align-items:center; gap:12px; }
  .stock-ticker { font-family:'DM Sans',sans-serif; font-size:13px; font-weight:600; color:var(--text); letter-spacing:0.3px; }
  .stock-sector { font-size:10px; color:var(--muted); font-family:'DM Sans',sans-serif; letter-spacing:0.2px; }
  .stock-weight { font-family:'Space Mono',monospace; font-size:12px; color:var(--accent); font-weight:700; }
  .btn-remove { background:none; border:none; color:var(--muted); cursor:pointer; padding:0 2px; font-size:16px; transition:color 0.2s; }
  .btn-remove:hover { color:var(--aggressive); }

  /* Portfolio summary */
  .portfolio-summary { padding:16px 24px 20px; border-top:1px solid var(--border); }
  .summary-chip { background:var(--surface2); border:1px solid var(--border); border-radius:6px; padding:6px 12px; font-size:11px; font-family:'Space Mono',monospace; color:var(--muted); }

  /* Analyze button */
  .btn-analyze {
    margin:0 24px 20px; padding:14px; width:calc(100% - 48px);
    background:linear-gradient(135deg,var(--accent),#00b87a); color:#000; border:none; border-radius:10px;
    font-family:'DM Sans',sans-serif; font-weight:600; font-size:13px; letter-spacing:0.5px; cursor:pointer;
    transition:opacity 0.2s,transform 0.1s,box-shadow 0.2s;
    box-shadow:0 4px 20px rgba(0,229,160,0.2);
  }
  .btn-analyze:hover { opacity:0.9; box-shadow:0 4px 30px rgba(0,229,160,0.4); }
  .btn-analyze:active { transform:scale(0.98); }
  .btn-analyze:disabled { opacity:0.4; cursor:not-allowed; }

  /* Empty state */
  .empty-state { padding:60px 24px; text-align:center; }
  .placeholder-icon { font-size:48px; margin-bottom:16px; opacity:0.3; }
  .placeholder-text { color:var(--muted); font-family:'Space Mono',monospace; font-size:12px; line-height:1.7; }

  /* Strategy card */
  .strategy-card { animation:fadeUp 0.4s ease backwards; }
  @keyframes fadeUp{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}
  .strategy-card:nth-child(2){animation-delay:0.1s}
  .strategy-card:nth-child(3){animation-delay:0.2s}
  .strategy-header {
    padding:18px 24px; display:flex; align-items:center; justify-content:space-between;
    border-bottom:1px solid var(--border);
  }
  .strategy-label { display:flex; align-items:center; gap:10px; }
  .strategy-badge {
    padding:4px 10px; border-radius:20px; font-size:10px; font-weight:600;
    letter-spacing:1.5px; text-transform:uppercase; font-family:'Space Mono',monospace;
  }
  .badge-aggressive { background:rgba(255,77,109,0.15); color:var(--aggressive); border:1px solid rgba(255,77,109,0.3); }
  .badge-moderate { background:rgba(255,209,102,0.15); color:var(--moderate); border:1px solid rgba(255,209,102,0.3); }
  .badge-conservative { background:rgba(6,214,160,0.15); color:var(--conservative); border:1px solid rgba(6,214,160,0.3); }
  .strategy-desc { font-size:11px; color:var(--muted); font-family:'Space Mono',monospace; max-width:200px; text-align:right; line-height:1.5; }
  .strategy-toggle { cursor:pointer; user-select:none; }
  .strategy-chevron { font-size:12px; color:var(--muted); transition:transform 0.25s ease; display:inline-block; }
  .strategy-chevron-open { transform:rotate(180deg); }
  .strategy-expand-hint { font-size:10px; color:var(--muted); margin-left:6px; font-weight:400; }
  .panel-toggle { cursor:pointer; user-select:none; display:flex; align-items:center; gap:0; }
  .panel-toggle .section-title { flex:1; }
  .panel-chevron { font-size:12px; color:var(--muted); transition:transform 0.25s ease; display:inline-block; }
  .panel-chevron-open { transform:rotate(180deg); }
  .panel-expand-hint { font-size:10px; color:var(--muted); margin-left:6px; font-weight:400; white-space:nowrap; }
  .panel-body { transition:all 0.25s ease; }
  .panel-body-collapsed { display:none; }
  .etf-list { padding:12px 16px 16px; display:flex; flex-direction:column; gap:8px; }
  .etf-list.strategy-collapsed { display:none; }

  /* ETF / Stock items */
  .etf-item {
    background:var(--surface2); border:1px solid var(--border); border-radius:10px;
    overflow:hidden; transition:border-color 0.2s,box-shadow 0.2s; cursor:pointer;
  }
  .etf-item:hover { border-color:var(--accent); box-shadow:0 0 0 1px rgba(0,229,160,0.1); }
  .etf-item.open { border-color:var(--accent); }
  .etf-item-header { padding:11px 14px; display:grid; grid-template-columns:1fr auto; gap:10px; align-items:center; }
  .ticker-name-group { display:flex; align-items:center; gap:10px; }
  .ticker-with-tag { display:flex; flex-direction:column; align-items:flex-start; gap:3px; min-width:60px; }
  .etf-ticker, .pick-ticker { font-family:'Space Mono',monospace; font-size:14px; font-weight:700; color:var(--text); }
    .item-type-tag { font-family:'Space Mono',monospace; font-size:8px; font-weight:700; letter-spacing:1px; padding:1px 5px; border-radius:3px; }
  .tag-etf { background:rgba(77,159,255,0.15); color:#4d9fff; border:1px solid rgba(77,159,255,0.3); }
  .tag-stock { background:rgba(255,77,109,0.12); color:var(--aggressive); border:1px solid rgba(255,77,109,0.25); }
  .etf-details h4, .pick-details h4 { font-size:12px; font-weight:600; color:var(--text); margin-bottom:2px; }
  .etf-details p,.pick-details p { font-size:11px; color:var(--muted); font-family:'Space Mono',monospace; }
    .etf-meta,.pick-meta { text-align:right; display:flex; flex-direction:column; align-items:flex-end; gap:4px; }
    .match-score { font-family:'Space Mono',monospace; font-size:11px; padding:2px 8px; border-radius:4px; font-weight:700; }
  .match-high { background:rgba(0,229,160,0.15); color:var(--accent); }
  .match-med { background:rgba(255,209,102,0.15); color:var(--moderate); }
  .pick-sector-tag { font-family:'Space Mono',monospace; font-size:10px; padding:2px 7px; border-radius:4px; display:inline-block; }
  .etf-meta .pick-sector-tag { background:rgba(77,159,255,0.15); color:#4d9fff; border:1px solid rgba(77,159,255,0.3); }
  .pick-meta .pick-sector-tag { background:rgba(255,77,109,0.1); color:var(--aggressive); border:1px solid rgba(255,77,109,0.25); }
  .pick-risk { font-family:'Space Mono',monospace; font-size:12px; font-weight:700; }
  
  /* Why hint */
  .etf-hint, .pick-hint {
    padding:0 14px 9px; font-family:'Space Mono',monospace; font-size:10px;
    color:var(--accent); opacity:0.55; letter-spacing:0.5px;
    display:flex; align-items:center; gap:5px; transition:opacity 0.2s;
  }
  .etf-item:hover .etf-hint, .etf-item:hover .pick-hint { opacity:1; }
  .etf-item.open .etf-hint, .etf-item.open .pick-hint { display:none; }

  /* Drawer */
  .etf-drawer,.pick-drawer { max-height:0; overflow:hidden; transition:max-height 0.35s cubic-bezier(0.4,0,0.2,1); }
  .etf-item.open .etf-drawer,.etf-item.open .pick-drawer { max-height:300px; }
  .etf-drawer-inner,.pick-drawer-inner {
    margin:0 12px 12px; background:rgba(0,229,160,0.05);
    border:1px solid rgba(0,229,160,0.15); border-radius:8px; padding:12px 14px;
  }
  .pick-drawer-inner { background:rgba(255,77,109,0.05); border-color:rgba(255,77,109,0.15); }
  .etf-drawer-label,.pick-drawer-label {
    font-family:'Space Mono',monospace; font-size:10px; font-weight:700;
    color:var(--accent); letter-spacing:1.5px; text-transform:uppercase; margin-bottom:7px;
  }
  .pick-drawer-label { color:var(--aggressive); }
  .etf-drawer-text,.pick-drawer-text { font-family:'Space Mono',monospace; font-size:11px; color:var(--text); line-height:1.7; opacity:0.85; }
  .etf-drawer-loading { display:flex; align-items:center; gap:8px; font-family:'Space Mono',monospace; font-size:11px; color:var(--muted); }
  .mini-spinner { width:12px; height:12px; border:2px solid var(--border); border-top-color:var(--accent); border-radius:50%; animation:spin 0.7s linear infinite; flex-shrink:0; }
  @keyframes spin{to{transform:rotate(360deg)}}

  /* Analysis bar */
  .analysis-bar { background:var(--surface); border:1px solid var(--border); border-radius:16px; padding:20px 24px 16px; animation:fadeUp 0.3s ease; }
  .analysis-bar-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:16px; flex-wrap:wrap; gap:10px; }
  .analysis-bar-header h3 { font-size:11px; margin:0; }
  .breakdown-legend { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
  .legend-item { display:flex; align-items:center; gap:5px; font-family:'Space Mono',monospace; font-size:9px; color:var(--muted); text-transform:uppercase; letter-spacing:0.5px; }
  .legend-hint { font-family:'Space Mono',monospace; font-size:9px; color:var(--muted); opacity:0.45; font-style:italic; margin-left:2px; }
  .legend-dot { width:10px; height:6px; border-radius:2px; flex-shrink:0; }
  .legend-dot-current { background:#64748b; }
  .legend-tick { width:2px; height:12px; border-radius:1px; flex-shrink:0; }
  .legend-tick-agg { background:var(--aggressive); }
  .legend-tick-mod { background:var(--moderate); }
  .legend-tick-con { background:var(--conservative); }

  /* Hoverable legend */
  .legend-item.hoverable {
    cursor:pointer; padding:3px 7px; border-radius:6px;
    border:1px solid transparent; transition:background 0.15s,border-color 0.15s,color 0.15s;
    position:relative;
  }
  .legend-item.hoverable:hover,.legend-item.hoverable.active { background:rgba(255,255,255,0.05); border-color:var(--border); }
  .legend-item.hoverable.active-agg { color:var(--aggressive); border-color:rgba(255,77,109,0.3); background:rgba(255,77,109,0.08); }
  .legend-item.hoverable.active-mod { color:var(--moderate); border-color:rgba(255,209,102,0.3); background:rgba(255,209,102,0.08); }
  .legend-item.hoverable.active-con { color:var(--conservative); border-color:rgba(6,214,160,0.3); background:rgba(6,214,160,0.08); }

  /* Strategy tooltips */
  .strategy-tooltip {
    position:absolute; bottom:calc(100% + 10px); left:50%;
    transform:translateX(-50%) translateY(4px);
    width:220px; background:#1a1f2e; border:1px solid var(--border);
    border-radius:10px; padding:12px 14px; pointer-events:none;
    opacity:0; transition:opacity 0.18s ease,transform 0.18s ease;
    z-index:100; box-shadow:0 8px 32px rgba(0,0,0,0.5);
  }
  .legend-item.hoverable:hover .strategy-tooltip,
  .legend-item.hoverable.active .strategy-tooltip { opacity:1; transform:translateX(-50%) translateY(0); }
  .strategy-tooltip::after {
    content:''; position:absolute; top:100%; left:50%; transform:translateX(-50%);
    border:5px solid transparent; border-top-color:var(--border);
  }
  .tooltip-label { font-family:'Space Mono',monospace; font-size:9px; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; margin-bottom:6px; }
  .tooltip-label.agg { color:var(--aggressive); }
  .tooltip-label.mod { color:var(--moderate); }
  .tooltip-label.con { color:var(--conservative); }
  .tooltip-body { font-family:'Space Mono',monospace; font-size:10px; color:var(--text); line-height:1.65; opacity:0.8; }
  .tooltip-note { margin-top:8px; padding-top:8px; border-top:1px solid var(--border); font-family:'Space Mono',monospace; font-size:9px; color:var(--muted); font-style:italic; line-height:1.5; }

  /* Sector bars */
  .sector-bars { display:flex; flex-direction:column; gap:7px; }
  .sector-row { display:grid; grid-template-columns:140px 1fr 32px; align-items:center; gap:10px; }
  .sector-name { font-family:'Space Mono',monospace; font-size:10px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .sector-pct { font-family:'Space Mono',monospace; font-size:10px; color:var(--text); text-align:right; font-weight:700; }
  .sector-row.missing .sector-name { opacity:0.45; }
  .sector-row.missing .sector-pct { color:var(--muted); font-weight:400; }
  .sector-bar-track { position:relative; background:var(--surface2); height:8px; border-radius:4px; overflow:visible; }
  .sector-bar-track.empty { background:rgba(255,255,255,0.04); border:1px dashed rgba(255,255,255,0.08); }
  .sector-bar-fill { height:100%; border-radius:4px; transition:width 0.9s cubic-bezier(0.4,0,0.2,1); position:relative; z-index:1; }
  /* Target tick markers — vertical line at target % position */
  .sector-tick { position:absolute; top:-3px; width:3px; height:14px; border-radius:2px; opacity:0; transition:opacity 0.25s ease, left 0.9s cubic-bezier(0.4,0,0.2,1); pointer-events:none; z-index:3; transform:translateX(-50%); }
  .sector-tick.agg { background:var(--aggressive); box-shadow:0 0 6px rgba(255,77,109,0.8); }
  .sector-tick.mod { background:var(--moderate); box-shadow:0 0 6px rgba(255,209,102,0.8); }
  .sector-tick.con { background:var(--conservative); box-shadow:0 0 6px rgba(6,214,160,0.8); }
  .sector-bars.show-agg .sector-tick.agg { opacity:1; }
  .sector-bars.show-mod .sector-tick.mod { opacity:1; }
  .sector-bars.show-con .sector-tick.con { opacity:1; }
  .sector-divider { display:flex; align-items:center; gap:8px; margin:14px 0 10px; }
  .sector-divider::before,.sector-divider::after { content:''; flex:1; height:1px; background:var(--border); }
  .sector-divider span { font-family:'Space Mono',monospace; font-size:9px; color:var(--muted); letter-spacing:1.5px; text-transform:uppercase; white-space:nowrap; }

  /* Screenshot upload */
  .upload-zone {
    margin:0 24px 16px; border:1.5px dashed var(--border); border-radius:12px;
    padding:18px 16px; text-align:center; cursor:pointer;
    transition:border-color 0.2s,background 0.2s; position:relative; overflow:hidden;
  }
  .upload-zone:hover,.upload-zone.drag-over { border-color:var(--accent); background:rgba(0,229,160,0.04); }
  .upload-zone input[type="file"] { position:absolute; inset:0; opacity:0; cursor:pointer; width:100%; height:100%; }
  .upload-icon { font-size:20px; margin-bottom:6px; opacity:0.5; }
  .upload-text { font-family:'Space Mono',monospace; font-size:10px; color:var(--muted); line-height:1.6; }
  .upload-text strong { color:var(--accent); }
  .scanning-overlay {
    position:absolute; inset:0; background:rgba(10,12,16,0.9); display:flex;
    flex-direction:column; align-items:center; justify-content:center; gap:10px;
    opacity:0; pointer-events:none; transition:opacity 0.2s; border-radius:10px;
  }
  .scanning-overlay.active { opacity:1; pointer-events:all; }
  .scan-spinner { width:24px; height:24px; border:2px solid var(--border); border-top-color:var(--accent); border-radius:50%; animation:spin 0.7s linear infinite; }
  .scan-text { font-family:'Space Mono',monospace; font-size:10px; color:var(--accent); letter-spacing:1px; }
  .import-preview { display:none; margin:0 24px 16px; }
  .import-preview.visible { display:block; }
  .import-preview-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
  .import-note { font-family:'Space Mono',monospace; font-size:10px; color:var(--muted); }
  .btn-import-all {
    background:var(--accent); color:#000; border:none; border-radius:6px;
    padding:6px 14px; font-family:'Space Mono',monospace; font-size:11px; font-weight:700;
    cursor:pointer; transition:opacity 0.15s;
  }
  .btn-import-all:hover { opacity:0.85; }
  .preview-items { display:flex; flex-direction:column; gap:5px; max-height:160px; overflow-y:auto; }
  .preview-item { display:grid; grid-template-columns:52px 1fr 70px 20px; align-items:center; gap:8px; background:var(--surface2); border-radius:6px; padding:7px 10px; }
  .preview-ticker { font-family:'Space Mono',monospace; font-size:12px; font-weight:700; color:var(--accent); }
  .preview-name { font-size:11px; color:var(--muted); font-family:'Space Mono',monospace; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
  .preview-pct-wrapper { display:flex; align-items:center; gap:2px; }
  .preview-pct-input { background:var(--surface); border:1px solid var(--border); border-radius:4px; padding:3px 4px; font-family:'Space Mono',monospace; font-size:12px; color:var(--text); width:48px; outline:none; text-align:right; }
  .preview-pct-input:focus { border-color:var(--accent); }
  .preview-pct-symbol { font-family:'Space Mono',monospace; font-size:11px; color:var(--muted); }
  .btn-preview-remove { background:none; border:none; color:var(--muted); cursor:pointer; font-size:14px; padding:0; transition:color 0.15s; }
  .btn-preview-remove:hover { color:var(--aggressive); }

  /* Results panel */
  .results-panel { display:flex; flex-direction:column; gap:16px; }

  /* ── PORTFOLIO HEALTH PANEL ─── */
  .health-alert { display:flex; align-items:center; gap:10px; padding:12px 20px; background:rgba(255,209,102,0.06); border-bottom:1px solid var(--border); font-family:'Space Mono',monospace; font-size:11px; color:var(--moderate); }
  .health-cards { display:grid; grid-template-columns:1fr 1fr; gap:0; }
  .health-card { padding:20px 24px; text-align:center; }
  .health-card:first-child { border-right:1px solid var(--border); }
  .health-card-label { font-family:'Space Mono',monospace; font-size:10px; letter-spacing:1px; text-transform:uppercase; color:var(--muted); margin-bottom:8px; }
  .health-card-value { font-family:'DM Sans',sans-serif; font-size:26px; font-weight:700; color:var(--text); }
  .health-card-value.moderate { color:var(--moderate); }
  .health-card-value.conservative { color:var(--conservative); }
  .health-card-value.aggressive { color:var(--aggressive); }
  .health-card-sub { font-family:'Space Mono',monospace; font-size:10px; color:var(--muted); margin-top:4px; }
  .health-card-bar { width:60px; height:4px; border-radius:2px; background:var(--border); margin:8px auto 0; }
  .health-card-bar-fill { height:100%; border-radius:2px; }
  .health-compare { padding:16px 20px; border-top:1px solid var(--border); }
  .health-compare-title { font-family:'Space Mono',monospace; font-size:10px; letter-spacing:1px; text-transform:uppercase; color:var(--muted); margin-bottom:12px; }
  .health-compare-row { display:grid; grid-template-columns:140px 1fr 100px 60px; align-items:center; gap:10px; padding:8px 0; border-bottom:1px solid rgba(30,36,48,0.5); font-family:'Space Mono',monospace; font-size:11px; }
  .health-compare-row:last-child { border-bottom:none; }
  .health-compare-label { color:var(--muted); }
  .health-compare-val { color:var(--text); font-weight:700; text-align:center; }
  .health-compare-spy { color:var(--muted); font-size:10px; text-align:center; }
  .health-compare-diff { font-size:10px; font-weight:700; text-align:right; }
  .health-compare-diff.good { color:var(--conservative); }
  .health-compare-diff.warn { color:var(--moderate); }
  .health-compare-diff.bad { color:var(--aggressive); }

  /* ── REBALANCING SUGGESTIONS ─── */
  .rebalance-list { padding:12px 20px 16px; display:flex; flex-direction:column; gap:8px; }
  .rebalance-item { font-family:'Space Mono',monospace; font-size:12px; color:var(--text); display:flex; align-items:center; gap:8px; }
  .rebalance-item .sector-link { color:var(--accent); cursor:default; }
  .rebalance-item .rebalance-note { color:var(--muted); font-size:11px; }

  /* ── POSITION SIZING ─── */
  .position-input-row { padding:16px 20px; display:flex; align-items:center; gap:10px; }
  .position-input-row label { font-family:'Space Mono',monospace; font-size:13px; color:var(--muted); font-weight:700; }
  .position-input-row input { flex:1; }
  .position-input-row .btn-calc { background:var(--surface2); border:1px solid var(--border); border-radius:8px; padding:10px 12px; color:var(--accent); cursor:pointer; font-size:14px; transition:border-color 0.2s; }
  .position-input-row .btn-calc:hover { border-color:var(--accent); }
  .position-table { width:100%; padding:0 20px 16px; }
  .position-table table { width:100%; border-collapse:collapse; }
  .position-table th { font-family:'Space Mono',monospace; font-size:10px; letter-spacing:1px; text-transform:uppercase; color:var(--muted); text-align:left; padding:8px 8px 10px; border-bottom:1px solid var(--border); }
  .position-table th:nth-child(n+2) { text-align:right; }
  .position-table td { font-family:'Space Mono',monospace; font-size:12px; color:var(--text); padding:8px; border-bottom:1px solid rgba(30,36,48,0.4); }
  .position-table td:nth-child(n+2) { text-align:right; }
  .position-table .ticker-cell { font-weight:700; }
  .position-table .sector-cell { font-size:10px; color:var(--muted); }
  .position-table .amount-cell { color:var(--muted); }
  .position-table .shares-cell { color:var(--accent); font-weight:700; }

  /* Live market data badges */
  .market-inline { display:inline-flex; align-items:center; gap:5px; vertical-align:middle; margin-left:6px; }
  .market-inline-price { font-family:'Space Mono',monospace; font-size:10px; color:var(--muted); font-weight:400; }
  .market-inline-price .currency { font-family:'DM Sans',sans-serif; font-size:9px; font-weight:700; color:var(--text); vertical-align:0.5px; margin-right:1px; }
  .market-badge {
    display:inline-flex; align-items:center; gap:3px;
    font-family:'Space Mono',monospace; font-size:9px; font-weight:700;
    padding:1px 5px; border-radius:3px; white-space:nowrap; flex-shrink:0;
  }
  .market-badge.up      { background:rgba(0,229,160,0.12); color:var(--conservative); border:1px solid rgba(0,229,160,0.25); }
  .market-badge.down    { background:rgba(255,77,109,0.12); color:var(--aggressive);   border:1px solid rgba(255,77,109,0.25); }
  .market-badge.flat    { background:rgba(90,100,120,0.15); color:var(--muted);        border:1px solid var(--border); }
  .market-badge.loading { background:var(--surface2); color:var(--muted); border:1px solid var(--border); animation:pulse 1.4s ease infinite; }
  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.4} }

  /* ── UPGRADE MODAL ─── */
  .upgrade-modal {
    display:none; position:fixed; inset:0; z-index:1000;
    background:rgba(0,0,0,0.7); backdrop-filter:blur(4px);
    align-items:center; justify-content:center; padding:20px;
  }
  .upgrade-modal.open { display:flex; animation:fadeIn 0.15s ease; }
  @keyframes fadeIn { from{opacity:0} to{opacity:1} }
  .upgrade-box {
    background:var(--surface); border:1px solid var(--border);
    border-radius:16px; padding:32px 28px; max-width:380px; width:100%;
    position:relative; animation:slideUp 0.2s cubic-bezier(0.4,0,0.2,1);
  }
  @keyframes slideUp { from{transform:translateY(16px);opacity:0} to{transform:translateY(0);opacity:1} }
  .upgrade-close {
    position:absolute; top:14px; right:16px; background:none; border:none;
    color:var(--muted); font-size:18px; cursor:pointer; line-height:1;
    transition:color 0.15s;
  }
  .upgrade-close:hover { color:var(--text); }
  .upgrade-icon { font-size:32px; margin-bottom:12px; }
  .upgrade-title { font-family:'DM Sans',sans-serif; font-size:20px; font-weight:700; color:var(--text); margin-bottom:6px; }
  .upgrade-sub { font-family:'Space Mono',monospace; font-size:10px; color:var(--muted); line-height:1.7; margin-bottom:20px; }
  .upgrade-tiers { display:flex; flex-direction:column; gap:8px; margin-bottom:20px; }
  .upgrade-tier {
    border:1px solid var(--border); border-radius:10px; padding:12px 14px;
    display:flex; align-items:center; justify-content:space-between;
    transition:border-color 0.2s;
  }
  .upgrade-tier.featured { border-color:var(--accent); background:rgba(0,229,160,0.04); }
  .upgrade-tier-name { font-family:'DM Sans',sans-serif; font-size:13px; font-weight:600; color:var(--text); }
  .upgrade-tier-desc { font-family:'Space Mono',monospace; font-size:9px; color:var(--muted); margin-top:2px; }
  .upgrade-tier-price { font-family:'Space Mono',monospace; font-size:13px; font-weight:700; }
  .upgrade-tier.featured .upgrade-tier-price { color:var(--accent); }
  .upgrade-tier-price span { font-size:9px; font-weight:400; color:var(--muted); }
  .upgrade-actions { display:flex; flex-direction:column; gap:8px; }
  .btn-upgrade-cta {
    width:100%; padding:12px; border-radius:9px; border:none; cursor:pointer;
    font-family:'Space Mono',monospace; font-size:11px; font-weight:700; letter-spacing:0.5px;
    background:var(--accent); color:#0a0c10; transition:opacity 0.2s;
  }
  .btn-upgrade-cta:hover { opacity:0.88; }
  .btn-upgrade-secondary {
    width:100%; padding:10px; border-radius:9px; cursor:pointer;
    font-family:'Space Mono',monospace; font-size:10px; color:var(--muted);
    background:none; border:1px solid var(--border); transition:border-color 0.2s, color 0.2s;
  }
  .btn-upgrade-secondary:hover { border-color:var(--muted); color:var(--text); }
  .upgrade-free-note { font-family:'Space Mono',monospace; font-size:9px; color:var(--muted); text-align:center; margin-top:10px; opacity:0.7; }

  /* ── SHOW MORE ─── */
  .show-more-items { display:none; flex-direction:column; gap:8px; }
  .show-more-items.open { display:flex; }
  .btn-show-more {
    margin:6px 0 2px; width:100%;
    background:none; border:1px dashed var(--border); border-radius:8px;
    padding:9px 14px; cursor:pointer; transition:border-color 0.2s, color 0.2s;
    display:flex; align-items:center; justify-content:center; gap:6px;
    font-family:'Space Mono',monospace; font-size:10px; letter-spacing:0.5px;
    color:var(--muted);
  }
  .btn-show-more:hover { border-color:var(--accent); color:var(--accent); }
  .btn-show-more.open  { border-style:solid; border-color:var(--border); color:var(--muted); }
  .market-close-label { font-family:'Space Mono',monospace; font-size:8px; color:var(--muted); opacity:0.6; letter-spacing:0.3px; }
  .market-refresh-row {
    display:flex; align-items:center; justify-content:space-between;
    padding:8px 0 4px; margin:0 0 8px;
  }
  .market-status { font-family:'Space Mono',monospace; font-size:9px; color:var(--muted); }
  .market-status.live  { color:var(--conservative); }
  .market-status.error { color:var(--aggressive); }
  .btn-refresh-market {
    background:none; border:1px solid var(--border); border-radius:6px;
    padding:4px 10px; font-family:'Space Mono',monospace; font-size:9px;
    color:var(--muted); cursor:pointer; transition:border-color 0.2s,color 0.2s;
    display:flex; align-items:center; gap:5px;
  }
  .btn-refresh-market:hover { border-color:var(--accent); color:var(--text); }
  .btn-refresh-market.spinning svg { animation:spin 0.7s linear infinite; }

  /* Disclaimer */
  .disclaimer-footer {
    text-align:center; font-family:'Space Mono',monospace; font-size:10px;
    color:var(--muted); opacity:0.5; padding:12px 8px 4px;
    line-height:1.6; border-top:1px solid var(--border); margin-top:4px;
  }

  /* ── RESPONSIVE ─────────────────────────────────────────── */

  /* Large desktop (1400px+) */
  @media (min-width: 1400px) {
    .main-grid { grid-template-columns: 1fr 2fr; gap: 32px; padding: 36px 2%; }
    .panel-header { padding: 20px 28px 14px; }
    .stock-form { padding: 24px 28px; }
    .stock-list { padding: 0 28px 14px; }
    .portfolio-summary { padding: 18px 28px 22px; }
    .btn-analyze { margin: 0 28px 24px; width: calc(100% - 56px); padding: 16px; font-size: 14px; }
    .upload-zone { margin: 0 28px 18px; }
    .import-preview { margin: 0 28px 18px; }
    .strategy-header { padding: 20px 28px; }
    .etf-list { padding: 14px 20px 20px; }
    .analysis-bar { padding: 24px 28px 20px; }
    .sector-row { grid-template-columns: 160px 1fr 36px; }
  }

  /* Medium-large desktop (1100–1400px) */
  @media (min-width: 1100px) and (max-width: 1399px) {
    .main-grid { gap: 28px; padding: 32px 2%; }
    .sector-row { grid-template-columns: 150px 1fr 34px; }
  }

  /* Small desktop / large tablet (900–1100px) */
  @media (min-width: 901px) and (max-width: 1099px) {
    .main-grid { grid-template-columns: 1fr 1.4fr; gap: 20px; padding: 24px 2%; }
    .sector-row { grid-template-columns: 120px 1fr 32px; }
    .strategy-desc { max-width: 150px; font-size: 10px; }
  }

  /* Tablet (max 900px) */
  @media (max-width: 900px) {
    .main-grid {
      grid-template-columns: 1fr;
      padding: 20px 16px;
      gap: 20px;
    }
    .container { padding: 0 16px; }
    header {
      padding: 20px 20px 16px;
      flex-direction: row; flex-wrap: wrap; align-items: center;
    }
    header.header-compact { padding: 10px 20px 0; }
    .logo { flex: 1; min-width: 0; }
    .tagline { display:none; }
    .header-actions {
      position: static; transform: none;
      order: 0;
    }
    .theme-toggle {
      position: static; transform: none;
      order: 0;
    }
    .header-sub { width: 100%; margin-top: 6px; padding: 5px 0 6px; }
    .switcher-pill { max-width: 160px; }
    .sector-row { grid-template-columns: 110px 1fr 32px; }
    .strategy-desc { max-width: 160px; }
    /* Sticky analyze button */
    .btn-analyze-sticky {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 900;
      background: var(--accent);
      color: #000;
      border: none;
      padding: 16px;
      font-family: 'DM Sans', sans-serif;
      font-weight: 700;
      font-size: 14px;
      letter-spacing: 0.5px;
      cursor: pointer;
      display: none;
      text-align: center;
      box-shadow: 0 -4px 20px rgba(0,0,0,0.5);
      padding-bottom: calc(16px + env(safe-area-inset-bottom));
    }
    .btn-analyze-sticky.visible { display: block; }
    .btn-analyze-sticky:active { opacity: 0.85; }
    body { padding-bottom: 56px; }
  }

  /* Mobile (max 600px) */
  @media (max-width: 600px) {
    header {
      padding: 14px 16px 12px;
      gap: 6px;
    }
    header.header-compact { padding: 8px 16px 0; }
    header.header-compact .logo h1 { font-size: 15px; }
    header.header-compact .logo-icon { width: 24px; height: 24px; }
    .logo h1 { font-size: 17px; }
    .logo-icon { width: 30px; height: 30px; }
    .tagline { display:none; }
    .header-sub { margin-top: 4px; padding: 4px 0 5px; }
    .switcher-pill { max-width: 120px; font-size: 10px; padding: 4px 8px; }
    .header-actions { gap: 6px; }
    .theme-toggle {
      padding: 4px 4px 4px 8px;
      font-size: 9px;
    }
    .theme-toggle-track { width: 24px; height: 14px; }
    .theme-toggle-thumb { width: 10px; height: 10px; }
    body.light .theme-toggle-thumb { transform: translateX(10px); }

    .main-grid { padding: 14px 12px; gap: 16px; }
    .container { padding: 0 12px; }

    .panel-header { padding: 12px 16px 10px; }
    .section-title { font-size: 11px; letter-spacing: 1.2px; }

    .stock-form { padding: 14px 16px; }
    .input-row { grid-template-columns: 1fr 70px; gap: 6px; margin-bottom: 10px; }
    input[type="text"], input[type="number"] { padding: 9px 10px; font-size: 12px; }
    .btn-add { padding: 9px 12px; font-size: 16px; }

    .stock-list { padding: 0 16px 10px; gap: 3px; }
    .stock-item { padding: 6px 12px 4px; }
    .stock-info { gap: 8px; }
    .stock-ticker { font-size: 12px; }
    .stock-sector { font-size: 9px; }

    .portfolio-summary { padding: 12px 16px 14px; }
    .btn-analyze { margin: 0 16px 16px; width: calc(100% - 32px); padding: 13px; font-size: 12px; }

    .upload-zone { margin: 0 16px 14px; padding: 14px 12px; }
    .upload-text { font-size: 9px; }
    .import-preview { margin: 0 16px 14px; }
    .preview-item { grid-template-columns: 44px 1fr 60px 18px; gap: 6px; padding: 6px 8px; }
    .preview-ticker { font-size: 11px; }
    .preview-name { font-size: 10px; }
    .preview-pct-input { width: 40px; font-size: 11px; }

    /* Analysis bar */
    .analysis-bar { padding: 14px 16px 12px; }
    .analysis-bar-header { flex-direction: column; align-items: flex-start; gap: 8px; margin-bottom: 12px; }
    .breakdown-legend { gap: 6px; }
    .sector-row { grid-template-columns: 90px 1fr 28px; gap: 8px; }
    .sector-name { font-size: 9px; }
    .sector-pct { font-size: 9px; }

    /* Strategy cards */
    .strategy-header { padding: 14px 16px; flex-wrap: wrap; gap: 8px; }
    .strategy-desc { max-width: 100%; text-align: left; font-size: 10px; }
    .etf-list { padding: 10px 12px 14px; gap: 6px; }
    .etf-item-header { padding: 10px 12px; }
    .etf-ticker, .pick-ticker { font-size: 13px; }
    .etf-details h4, .pick-details h4 { font-size: 11px; }
    .etf-details p, .pick-details p { font-size: 10px; }

    /* Strategy tooltip: reposition on mobile */
    .strategy-tooltip {
      left: auto;
      right: 0;
      transform: translateY(4px);
      width: 190px;
    }
    .legend-item.hoverable:hover .strategy-tooltip,
    .legend-item.hoverable.active .strategy-tooltip {
      transform: translateY(0);
    }

    /* Drawer text */
    .etf-drawer-inner, .pick-drawer-inner { padding: 10px 12px; margin: 0 10px 10px; }
    .etf-drawer-text, .pick-drawer-text { font-size: 10px; }

    /* Empty state */
    .empty-state { padding: 40px 16px; }
    .placeholder-icon { font-size: 36px; }
    .placeholder-text { font-size: 11px; }

    /* Disclaimer */
    .disclaimer-footer { font-size: 9px; padding: 10px 4px 4px; }
  }

  /* Very small screens */
  @media (max-width: 360px) {
    .logo h1 { font-size: 15px; }
    .theme-toggle { display: none; }
    .sector-row { grid-template-columns: 78px 1fr 26px; }
    .input-row { grid-template-columns: 1fr 60px; }
  }

  @media (min-width: 901px) {
    .btn-analyze-sticky { display: none !important; }
  }

  /* ── PORTFOLIO SWITCHER (header dropdown) ─── */
  .portfolio-switcher {
    position: relative;
  }
  .switcher-pill {
    display: flex; align-items: center; gap: 5px;
    background: var(--surface2); border: 1px solid var(--border); border-radius: 8px;
    padding: 5px 10px; cursor: pointer;
    font-family: 'Space Mono', monospace; font-size: 10px; font-weight: 700; color: var(--muted);
    letter-spacing: 1px; text-transform: uppercase;
    transition: border-color 0.2s, background 0.2s;
    white-space: nowrap; max-width: 200px;
  }
  .switcher-pill:hover { border-color: var(--accent); }
  .switcher-label { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .switcher-chevron { font-size: 8px; color: var(--muted); transition: transform 0.2s; flex-shrink: 0; }
  .portfolio-switcher.open .switcher-chevron { transform: rotate(180deg); }
  .switcher-dropdown {
    display: none; position: absolute; top: calc(100% + 6px); right: 0;
    background: var(--surface); border: 1px solid var(--border); border-radius: 10px;
    padding: 8px; min-width: 260px; max-width: 300px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.5); z-index: 10002;
  }
  .portfolio-switcher.open .switcher-dropdown { display: block; }
  .switcher-slots { display: flex; flex-direction: column; gap: 4px; margin-bottom: 6px; }
  .switcher-slots:empty { margin-bottom: 0; }
  .switcher-empty {
    padding: 10px; text-align: center;
    font-family: 'Space Mono', monospace; font-size: 10px; color: var(--muted);
  }
  .switcher-slot {
    display: flex; align-items: center; gap: 6px;
    background: var(--surface2); border: 1px solid var(--border);
    border-radius: 8px; padding: 7px 10px; cursor: pointer;
    transition: border-color 0.2s; position: relative;
  }
  .switcher-slot:hover { border-color: var(--accent); }
  .switcher-slot.active { border-color: var(--accent); background: rgba(0,229,160,0.06); }
  .switcher-slot.active::before {
    content: '✓'; position: absolute; left: -2px; top: 50%; transform: translate(-50%, -50%);
    background: var(--accent); color: #000; width: 14px; height: 14px; border-radius: 50%;
    font-size: 9px; display: flex; align-items: center; justify-content: center; font-weight: 700;
  }
  .slot-name { font-family:'Space Mono',monospace; font-size:11px; color:var(--text); flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .slot-name-input {
    font-family:'Space Mono',monospace; font-size:11px; color:var(--text);
    background: none; border: none; outline: none; flex:1; cursor:text;
  }
  .slot-count { font-family:'Space Mono',monospace; font-size:9px; color:var(--muted); }
  .slot-actions { display:flex; gap:4px; }
  .slot-btn {
    background:none; border:none; color:var(--muted); cursor:pointer;
    font-size:13px; padding:2px 5px; border-radius:3px; transition:color 0.15s, background 0.15s;
    line-height:1;
  }
  .slot-btn:hover { color:var(--accent); background:var(--border); }
  .slot-btn.danger:hover { color:var(--aggressive); background:var(--border); }
  .switcher-actions { display: flex; flex-direction: column; gap: 4px; }
  .switcher-btn {
    width: 100%; background: var(--surface2); border: 1px solid var(--border); border-radius: 7px;
    padding: 7px 10px; font-family: 'Space Mono', monospace; font-size: 10px; color: var(--muted);
    cursor: pointer; transition: border-color 0.2s, color 0.2s; text-align: center;
  }
  .switcher-btn:hover { border-color: var(--accent); color: var(--text); }
  .switcher-btn-clear { border-color: transparent; }
  .switcher-btn-clear:hover { border-color: var(--aggressive) !important; color: var(--aggressive) !important; }

  /* Ticker autocomplete */
  .autocomplete-wrapper { position:relative; }
  .autocomplete-dropdown {
    display:none; position:absolute; top:100%; left:0; right:0; z-index:100;
    background:var(--surface); border:1px solid var(--border); border-top:none;
    border-radius:0 0 8px 8px; max-height:200px; overflow-y:auto;
    box-shadow:0 8px 24px rgba(0,0,0,0.4);
  }
  .autocomplete-dropdown.open { display:block; }
  .autocomplete-item {
    padding:8px 12px; cursor:pointer; display:flex; justify-content:space-between;
    align-items:center; font-family:'Space Mono',monospace; font-size:11px;
    border-bottom:1px solid var(--border);
  }
  .autocomplete-item:last-child { border-bottom:none; }
  .autocomplete-item:hover, .autocomplete-item.selected { background:var(--surface2); }
  .autocomplete-item-ticker { color:var(--accent); font-weight:700; }
  .autocomplete-item-name { color:var(--muted); font-size:10px; text-align:right; max-width:60%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

  /* ── RISK SCORE ─── */
  .risk-score-bar {
    margin: 0 24px 14px;
    background: var(--surface2); border: 1px solid var(--border);
    border-radius: 10px; padding: 10px 14px;
    display: flex; align-items: center; gap: 12px;
  }
  .risk-score-label { font-family:'Space Mono',monospace; font-size:9px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; white-space:nowrap; }
  .risk-score-track { flex:1; height:6px; background:var(--border); border-radius:3px; overflow:hidden; }
  .risk-score-fill { height:100%; border-radius:3px; transition:width 0.6s cubic-bezier(0.4,0,0.2,1), background 0.6s; }
  .risk-score-num { font-family:'Space Mono',monospace; font-size:13px; font-weight:700; min-width:28px; text-align:right; }

  /* ── CORRELATION WARNINGS ─── */
  .correlation-warnings {
    margin: 0 24px 10px; display: flex; flex-direction: column; gap: 5px;
  }
  .corr-warn {
    display: flex; align-items: flex-start; gap: 7px;
    background: rgba(255,209,102,0.07); border: 1px solid rgba(255,209,102,0.2);
    border-radius: 7px; padding: 7px 10px; animation: slideIn 0.2s ease;
  }
  .corr-icon { font-size:11px; flex-shrink:0; margin-top:1px; }
  .corr-text { font-family:'Space Mono',monospace; font-size:10px; color:var(--moderate); line-height:1.5; }
  .corr-text strong { color:var(--text); }

  /* ── SLIDER on holdings ─── */
  .stock-item { flex-direction: column; align-items: stretch; gap: 3px; padding: 7px 14px 5px; }
  .stock-item-top { display:flex; align-items:center; justify-content:space-between; }
  .stock-slider-row { display:flex; align-items:center; gap:8px; }
  .stock-slider {
    flex:1; -webkit-appearance:none; appearance:none;
    height:3px; border-radius:2px; background:var(--border); outline:none; cursor:pointer;
  }
  .stock-slider::-webkit-slider-thumb {
    -webkit-appearance:none; appearance:none;
    width:12px; height:12px; border-radius:50%;
    background:var(--accent); cursor:pointer;
    box-shadow: 0 0 6px rgba(0,229,160,0.5);
    transition: transform 0.1s;
  }
  .stock-slider::-webkit-slider-thumb:hover { transform: scale(1.2); }
  .stock-slider::-moz-range-thumb {
    width:12px; height:12px; border-radius:50%;
    background:var(--accent); cursor:pointer; border:none;
  }
  .slider-pct { font-family:'Space Mono',monospace; font-size:11px; color:var(--accent); font-weight:700; min-width:36px; text-align:right; }

  /* ── WHAT-IF SIMULATOR ─── */
  .whatif-panel {
    margin: 0 24px 14px; background:var(--surface2);
    border:1px solid var(--border); border-radius:10px; overflow:hidden;
  }
  .whatif-header {
    display:flex; align-items:center; justify-content:space-between;
    padding:9px 14px; cursor:pointer; transition:background 0.15s;
  }
  .whatif-header:hover { background:rgba(255,255,255,0.03); }
  .whatif-title { font-family:'Space Mono',monospace; font-size:10px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; }
  .whatif-toggle { font-size:10px; color:var(--muted); }
  .whatif-body { padding:0 14px 12px; display:none; }
  .whatif-body.open { display:block; }
  .whatif-row { display:grid; grid-template-columns:1fr 70px; gap:6px; margin-bottom:8px; }
  .whatif-result { font-family:'Space Mono',monospace; font-size:10px; color:var(--muted); line-height:1.6; }
  .whatif-result strong { color:var(--accent); }
  .whatif-result .wi-new { color:var(--moderate); }

  /* ── ONBOARDING ─── */
  .onboarding-banner {
    margin: 0 24px 14px; background: rgba(0,229,160,0.05);
    border:1px solid rgba(0,229,160,0.15); border-radius:10px; padding:12px 14px;
  }
  .onboarding-text { font-family:'Space Mono',monospace; font-size:10px; color:var(--muted); line-height:1.7; margin-bottom:10px; }
  .onboarding-text strong { color:var(--accent); }
  .onboarding-examples { display:flex; flex-wrap:wrap; gap:6px; }
  .btn-example {
    background:var(--surface); border:1px solid var(--border); border-radius:6px;
    padding:5px 10px; font-family:'Space Mono',monospace; font-size:10px; color:var(--text);
    cursor:pointer; transition:border-color 0.2s, color 0.2s;
  }
  .btn-example:hover { border-color:var(--accent); color:var(--accent); }

  /* ── SHARE BUTTON ─── */
  .share-export-row {
    display:flex; gap:8px; padding:0 24px 16px;
  }
  .btn-share, .btn-export-pdf {
    flex:1; background:var(--surface2); border:1px solid var(--border); border-radius:8px;
    padding:9px; font-family:'Space Mono',monospace; font-size:10px; color:var(--muted);
    cursor:pointer; transition:border-color 0.2s, color 0.2s;
    display:flex; align-items:center; justify-content:center; gap:6px;
  }
  .btn-share:hover { border-color:var(--accent); color:var(--accent); }
  .btn-export-pdf:hover { border-color:#a78bfa; color:#a78bfa; }
  .share-toast {
    position:fixed; bottom:24px; left:50%; transform:translateX(-50%) translateY(10px);
    background:var(--surface); border:1px solid var(--accent); border-radius:8px;
    padding:10px 20px; font-family:'Space Mono',monospace; font-size:11px; color:var(--accent);
    opacity:0; transition:opacity 0.2s, transform 0.2s; pointer-events:none; z-index:999999;
    white-space:nowrap;
  }
  .share-toast.show { opacity:1; transform:translateX(-50%) translateY(0); }

  /* ── PDF EXPORT ─── */
  @media print {
    header, .upload-zone, .import-preview, .stock-form, .portfolio-switcher,
    .risk-score-bar, .whatif-panel, .share-export-row, .onboarding-banner,
    .btn-analyze, .btn-remove, .btn-refresh-market, .theme-toggle,
    .pick-hint, .etf-hint, .etf-drawer, .pick-drawer,
    .market-refresh-row { display:none !important; }
    body { background:#fff !important; color:#000 !important; }
    .main-grid { grid-template-columns: 1fr 1.8fr !important; }
    .panel, .strategy-card, .analysis-bar { border:1px solid #ddd !important; }
  }

